{% import 'docker/network.jinja2' as dn with context -%}
{% import 'docker/volumes.jinja2' as dv with context -%}
{% import 'docker/misc.jinja2' as dm with context -%}

updater:
  container_name: watchtower
  hostname: watchtower
  image: containrrr/watchtower:latest
  environment:
    WATCHTOWER_LABEL_ENABLE: "true"
    WATCHTOWER_CLEANUP: "true"
    WATCHTOWER_INCLUDE_STOPPED: "true"
    WATCHTOWER_REVIVE_STOPPED: "true"
    WATCHTOWER_POLL_INTERVAL: 3600
    WATCHTOWER_DEBUG: "true"
  {{ dv.volumes_section_complete()|indent(width = 2) }}
    {{ dv.mount_docker_socket() }}
  {{ dn.discovery_network_section()|indent(width = 2) }}
  {{ dm.common()|indent(width = 2) }}
